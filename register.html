<!DOCTYPE html>
<html lang="en">

<head>
    <title>Aether - Register</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    <meta name="msapplication-config" content="none">
    <meta name="theme-color" content="#ffffff">

    <link rel="icon" type="image/png" sizes="192x192" href="assets/img/aether-icon.png?t=1750992166">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/img/aether-icon.png?t=1750992166">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/img/aether-icon.png?t=1750992166">
    <link rel="apple-touch-icon" sizes="192x192" href="assets/img/aether-icon.png?t=1750992166">
    <link rel="apple-touch-icon-precomposed" href="assets/img/aether-icon.png?t=1750992166">

    <link rel="stylesheet" href="assets/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/css/templatemo.css">
    <link rel="stylesheet" href="assets/css/custom.css">

    <!-- Google Fonts - Noto Sans JP (å°å¡š ê¸°ë°˜) -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preload" href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&display=swap&v=3" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;600;700&display=swap&v=3" rel="stylesheet"></noscript>
    
    <!-- Load fonts style after rendering the layout styles -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Montserrat:wght@100;200;300;400;500;600;700;800;900&display=swap">
    <style>
        body {
            font-family: "Montserrat", sans-serif;
        }
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
            font-family: "Montserrat", sans-serif;
            font-weight: 600;
        }
        .japanese-text {
            font-family: "Noto Sans JP", "Hiragino Sans", "Yu Gothic", "Meiryo", sans-serif !important;
            font-weight: 400;
            line-height: 1.6;
            font-display: swap;
        }
        .japanese-heading {
            font-family: "Noto Sans JP", "Hiragino Sans", "Yu Gothic", "Meiryo", sans-serif !important;
            font-weight: 600;
            line-height: 1.4;
            font-display: swap;
        }
        
        /* ì˜ë¬¸ ì„œì²´ ë³´í˜¸ - ì „ì—­ í°íŠ¸ ì ìš© ì œê±° */
        h1, h2, h3, h4, h5, h6, .h1, .h2, .h3, .h4, .h5, .h6 {
            font-family: "Montserrat", sans-serif !important;
            font-weight: 600;
        }
        
        /* FontAwesome ì•„ì´ì½˜ ë³´í˜¸ */
        .fas, .far, .fab, .fa {
            font-family: "Font Awesome 5 Free" !important;
        }
        
        /* ëª¨ë‹¬ ë‚´ ì¼ë³¸ì–´ ì„œì²´ ê°•ì œ ì ìš© */
        .modal .japanese-text,
        .modal .japanese-heading,
        .modal-body,
        .modal-body p,
        .modal-body li,
        .modal-body h6,
        .modal-title {
            font-family: "Noto Sans JP", "Hiragino Sans", "Yu Gothic", "Meiryo", sans-serif !important;
        }
        
        .modal .japanese-heading,
        .modal-body h6,
        .modal-title {
            font-weight: 600 !important;
            font-size: 0.8em !important; /* 20% ê°ì†Œ */
        }
        
        .modal .japanese-text,
        .modal-body p,
        .modal-body li {
            font-weight: 400 !important;
            font-size: 0.8em !important; /* 20% ê°ì†Œ */
        }
    </style>
    <link rel="stylesheet" href="assets/css/fontawesome.min.css">
    <style>
        /* User dropdown hover fix */
        .dropdown-toggle:hover,
        .dropdown-toggle:focus,
        #user-name:hover {
            color: #343a40 !important;
            text-decoration: none !important;
        }
        .nav-link:hover {
            color: #343a40 !important;
        }
        
        /* ë„¤ë¹„ê²Œì´ì…˜ë°” í…ìŠ¤íŠ¸ thin ì„œì²´ í†µì¼ */
        .navbar-nav .nav-link {
            font-family: "Montserrat", sans-serif !important;
            font-weight: 300 !important;
            font-size: 1rem !important;
        }
        
        .navbar-brand {
            font-family: "Montserrat", sans-serif !important;
            font-weight: 300 !important;
        }
        
        #user-name {
            font-family: "Montserrat", sans-serif !important;
            font-weight: 300 !important;
        }
        
        /* íšŒì›ê°€ì… í˜ì´ì§€ ì „ìš© ìŠ¤íƒ€ì¼ */
        body {
            background-color: #f8f9fa;
        }
        .register-container {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 1rem;
        }
        .register-card {
            max-width: 450px;
            width: 100%;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            border: none;
            border-radius: 10px;
        }
        .register-header {
            background-color: #000000;
            color: white;
            border-radius: 10px 10px 0 0;
            padding: 2rem;
            text-align: center;
        }
        .register-body {
            padding: 2rem;
        }
        .form-control:focus {
            border-color: #6c757d;
            box-shadow: 0 0 0 0.2rem rgba(108, 117, 125, 0.25);
        }
        .btn-register {
            background-color: #6c757d;
            border-color: #6c757d;
        }
        .btn-register:hover {
            background-color: #5a6268;
            border-color: #545b62;
        }
        .password-strength {
            margin-top: 0.5rem;
        }
        .strength-bar {
            height: 4px;
            border-radius: 2px;
            background-color: #e9ecef;
            overflow: hidden;
        }
        .strength-fill {
            height: 100%;
            transition: all 0.3s ease;
        }
        .strength-weak { background-color: #6c757d; }
        .strength-medium { background-color: #495057; }
        .strength-strong { background-color: #343a40; }
        
        /* ë§í¬ í˜¸ë²„ íš¨ê³¼ - ëª¨ë…¸í†¤ ìƒ‰ìƒ */
        .register-body a,
        .register-body a:link,
        .register-body a:visited {
            color: #343a40 !important;
            text-decoration: none !important;
        }
        
        .register-body a:hover,
        .register-body a:active {
            color: #6c757d !important;
            text-decoration: none !important;
            transition: color 0.3s ease;
        }
        
        /* ë¡œê·¸ì¸ ë§í¬ íŠ¹ë³„ ì§€ì • */
        a[href="login.html"],
        a[href="login.html"]:link,
        a[href="login.html"]:visited {
            color: #343a40 !important;
        }
        
        a[href="login.html"]:hover,
        a[href="login.html"]:active {
            color: #6c757d !important;
            transition: color 0.3s ease;
        }
        
        /* ì²´í¬ë°•ìŠ¤ ëª¨ë…¸í†¤ ìŠ¤íƒ€ì¼ */
        .form-check-input {
            background-color: #fff;
            border-color: #6c757d;
        }
        
        .form-check-input:checked {
            background-color: #343a40 !important;
            border-color: #343a40 !important;
        }
        
        .form-check-input:focus {
            border-color: #6c757d;
            box-shadow: 0 0 0 0.25rem rgba(108, 117, 125, 0.25);
        }
        
        /* ëª¨ë°”ì¼ ìµœì í™” */
        @media (max-width: 767.98px) {
            .register-container {
                padding: 0.5rem;
                align-items: center;
                justify-content: center;
            }
            
            .register-card {
                max-width: 100%;
                margin: 0 auto;
            }
            
            .register-header {
                padding: 1.5rem;
            }
            
            .register-body {
                padding: 1.5rem;
            }
        }
        
        .form-check-input:checked:focus {
            border-color: #343a40;
            box-shadow: 0 0 0 0.25rem rgba(52, 58, 64, 0.25);
        }
    </style>
</head>

<body>
    <!-- Start Top Nav -->
    <nav class="navbar navbar-expand-lg navbar-light" id="templatemo_nav_top" style="min-height: 20px; background-color: #000000 !important;">
        <div class="container text-light">
            <div class="w-100 d-flex justify-content-between">
                <div>
                    <i class="fa fa-envelope mx-2"></i>
                    <a class="navbar-sm-brand text-light text-decoration-none" href="mailto:aether7info@gmail.com">aether7info@gmail.com</a>
                </div>
            </div>
        </div>
    </nav>
    <!-- Close Top Nav -->

    <!-- Header -->
    <nav class="navbar navbar-expand-lg navbar-light shadow">
        <div class="container d-flex justify-content-between align-items-center">

            <a class="navbar-brand text-success logo align-self-center" href="index.html">
                <img src="assets/img/logo.png" alt="Logo" class="img-fluid" style="max-height: 50px;">
            </a>

            <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse" data-bs-target="#templatemo_main_nav" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="align-self-center collapse navbar-collapse flex-fill  d-lg-flex justify-content-lg-between" id="templatemo_main_nav">
                <!-- ëª¨ë°”ì¼ ë©”ë‰´ ë ˆì´ì•„ì›ƒ -->
                <div class="d-lg-none w-100">
                    <!-- ì˜ë¬¸ ë©”ë‰´ - ê°€ë¡œ ì •ë ¬ -->
                    <div class="d-flex justify-content-center mb-4">
                        <ul class="nav navbar-nav d-flex flex-row gap-4">
                            <li class="nav-item">
                                <a class="nav-link" href="index.html">Home</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="shop.html">Brand</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" href="info.html">Info</a>
                            </li>
                        </ul>
                    </div>
                    
                    <!-- ì•„ì´ì½˜ë“¤ - ê°€ë¡œ ì •ë ¬, ì¢Œìš° ì—¬ë°± ì¶”ê°€ -->
                    <div class="d-flex justify-content-center align-items-center gap-4 px-4">
                        <a href="cart.html" class="nav-link text-decoration-none">
                            <i class="fas fa-shopping-cart text-dark" style="font-size: 1.5rem;"></i>
                            <span class="badge bg-secondary ms-1" id="cart-count-mobile">0</span>
                        </a>
                        <div class="dropdown">
                            <a href="#" class="nav-link dropdown-toggle text-decoration-none" id="userDropdownMobile" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                <i class="fas fa-user text-dark" style="font-size: 1.5rem;"></i>
                            </a>
                            <ul class="dropdown-menu dropdown-menu-center" aria-labelledby="userDropdownMobile">
                                <li id="login-menu-mobile" style="display: none;">
                                    <a class="dropdown-item" href="login.html">
                                        <i class="fas fa-sign-in-alt me-2"></i>Login
                                    </a>
                                </li>
                                <li id="register-menu-mobile" style="display: none;">
                                    <a class="dropdown-item" href="register.html">
                                        <i class="fas fa-user-plus me-2"></i>Register
                                    </a>
                                </li>
                                <li id="profile-menu-mobile" style="display: none;">
                                    <a class="dropdown-item" href="profile.html">
                                        <i class="fas fa-user-circle me-2"></i>Profile
                                    </a>
                                </li>
                                <li id="points-menu-mobile" style="display: none;">
                                    <a class="dropdown-item" href="points.html">
                                        <i class="fas fa-coins me-2"></i>Points
                                    </a>
                                </li>
                                <li id="logout-menu-mobile" style="display: none;">
                                    <hr class="dropdown-divider">
                                </li>
                                <li id="logout-menu-item-mobile" style="display: none;">
                                    <a class="dropdown-item" href="#" onclick="logout()">
                                        <i class="fas fa-sign-out-alt me-2"></i>Logout
                                    </a>
                                </li>
                            </ul>
                        </div>
                    </div>
                </div>
                
                <!-- ë°ìŠ¤í¬í†± ë©”ë‰´ ë ˆì´ì•„ì›ƒ -->
                <div class="flex-fill d-none d-lg-block">
                    <ul class="nav navbar-nav d-flex justify-content-between mx-lg-auto" style="max-width: 400px; margin: 0 auto;">
                        <li class="nav-item">
                            <a class="nav-link" href="index.html">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="shop.html">Brand</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="info.html">Info</a>
                        </li>
                    </ul>
                </div>
                <div class="navbar align-self-center d-flex d-none d-lg-flex">
                    <a href="cart.html" class="nav-link text-decoration-none me-3">
                        <i class="fas fa-shopping-cart text-dark"></i>
                        <span class="badge bg-secondary" id="cart-count">0</span>
                    </a>
                    <div class="dropdown">
                        <a href="#" class="nav-link dropdown-toggle text-decoration-none" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                            <i class="fas fa-user text-dark"></i>
                            <span id="user-name" class="d-none d-lg-inline ms-1"></span>
                        </a>
                        <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
                            <li id="login-menu" style="display: none;">
                                <a class="dropdown-item" href="login.html">
                                    <i class="fas fa-sign-in-alt me-2"></i>Login
                                </a>
                            </li>
                            <li id="register-menu" style="display: none;">
                                <a class="dropdown-item" href="register.html">
                                    <i class="fas fa-user-plus me-2"></i>Register
                                </a>
                            </li>
                            <li id="profile-menu" style="display: none;">
                                <a class="dropdown-item" href="profile.html">
                                    <i class="fas fa-user-circle me-2"></i>Profile
                                </a>
                            </li>
                            <li id="points-menu" style="display: none;">
                                <a class="dropdown-item" href="points.html">
                                    <i class="fas fa-coins me-2"></i>Points
                                </a>
                            </li>
                            <li id="logout-menu" style="display: none;">
                                <hr class="dropdown-divider">
                            </li>
                            <li id="logout-menu-item" style="display: none;">
                                <a class="dropdown-item" href="#" onclick="logout()">
                                    <i class="fas fa-sign-out-alt me-2"></i>Logout
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </nav>
    <!-- Close Header -->

    <!-- Register Container -->
    <div class="register-container">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-md-6 col-lg-5">
                    <div class="card register-card">
                        <div class="register-header">
                            <h2 class="japanese-heading mb-0">æ–°è¦ç™»éŒ²</h2>
                            <p class="japanese-text mb-0 mt-2">ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ä½œæˆ</p>
                        </div>
                        <div class="register-body">
                            <div id="register-alert" class="alert" style="display: none;"></div>

                            <form id="register-form">

                                <div class="mb-3">
                                    <label for="email" class="form-label japanese-text">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
                                    <div class="input-group">
                                        <span class="input-group-text"><i class="fas fa-envelope text-muted"></i></span>
                                        <input type="email" class="form-control" id="email" placeholder="example@email.com" required>
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <label for="password" class="form-label japanese-text">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰</label>
                                    <div class="input-group">
                                        <span class="input-group-text"><i class="fas fa-lock text-muted"></i></span>
                                        <input type="password" class="form-control" id="password" placeholder="8æ–‡å­—ä»¥ä¸Šã®ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰" required minlength="8">
                                        <button class="btn btn-outline-secondary" type="button" id="toggle-password">
                                            <i class="fas fa-eye"></i>
                                        </button>
                                    </div>
                                    <div class="password-strength">
                                        <div class="strength-bar">
                                            <div class="strength-fill" id="strength-fill" style="width: 0%;"></div>
                                        </div>
                                        <small class="text-muted japanese-text" id="strength-text">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¼·åº¦</small>
                                    </div>
                                </div>

                                <div class="mb-3">
                                    <label for="confirm-password" class="form-label japanese-text">ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ç¢ºèª</label>
                                    <div class="input-group">
                                        <span class="input-group-text"><i class="fas fa-lock text-muted"></i></span>
                                        <input type="password" class="form-control" id="confirm-password" placeholder="ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã‚’å†å…¥åŠ›" required>
                                    </div>
                                </div>

                                <div class="mb-3 form-check">
                                    <input type="checkbox" class="form-check-input" id="agree-terms" required>
                                    <label class="form-check-label japanese-text" for="agree-terms">
                                        <a href="#" class="text-decoration-none text-dark fw-bold" onclick="showTermsModal()">åˆ©ç”¨è¦ç´„</a>ãŠã‚ˆã³<a href="#" class="text-decoration-none text-dark fw-bold" onclick="showPrivacyModal()">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a>ã«åŒæ„ã—ã¾ã™
                                    </label>
                                </div>

                                <button type="submit" class="btn btn-register btn-dark w-100 japanese-text">
                                    <i class="fas fa-user-plus me-2"></i>ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆ
                                </button>
                            </form>

                            <hr class="my-4">

                            <div class="text-center">
                                <p class="japanese-text mb-0">ã™ã§ã«ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã‚’ãŠæŒã¡ã®æ–¹ã¯</p>
                                <a href="login.html" class="text-decoration-none text-dark japanese-text fw-bold">ãƒ­ã‚°ã‚¤ãƒ³</a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- åˆ©ç”¨è¦ç´„ Modal -->
    <div class="modal fade" id="termsModal" tabindex="-1" aria-labelledby="termsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-dark text-white">
                    <h5 class="modal-title japanese-heading" id="termsModalLabel">åˆ©ç”¨è¦ç´„</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body japanese-text" style="max-height: 400px; overflow-y: auto;">
                    <h6 class="japanese-heading">ç¬¬1æ¡ï¼ˆé©ç”¨ï¼‰</h6>
                    <p class="japanese-text">æœ¬åˆ©ç”¨è¦ç´„ã¯ã€æ ªå¼ä¼šç¤¾JAYCOSï¼ˆä»¥ä¸‹ã€Œå½“ç¤¾ã€ï¼‰ãŒæä¾›ã™ã‚‹ã‚µãƒ¼ãƒ“ã‚¹ï¼ˆä»¥ä¸‹ã€Œæœ¬ã‚µãƒ¼ãƒ“ã‚¹ã€ï¼‰ã®åˆ©ç”¨æ¡ä»¶ã‚’å®šã‚ã‚‹ã‚‚ã®ã§ã™ã€‚</p>
                    
                    <h6 class="japanese-heading">ç¬¬2æ¡ï¼ˆåˆ©ç”¨ç™»éŒ²ï¼‰</h6>
                    <p class="japanese-text">æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã«ãŠã„ã¦ã¯ã€ç™»éŒ²å¸Œæœ›è€…ãŒæœ¬åˆ©ç”¨è¦ç´„ã«åŒæ„ã®ä¸Šã€å½“ç¤¾ã®å®šã‚ã‚‹æ–¹æ³•ã«ã‚ˆã£ã¦åˆ©ç”¨ç™»éŒ²ã‚’ç”³è«‹ã—ã€å½“ç¤¾ãŒã“ã‚Œã‚’æ‰¿èªã™ã‚‹ã“ã¨ã«ã‚ˆã£ã¦ã€åˆ©ç”¨ç™»éŒ²ãŒå®Œäº†ã™ã‚‹ã‚‚ã®ã¨ã—ã¾ã™ã€‚</p>
                    
                    <h6 class="japanese-heading">ç¬¬3æ¡ï¼ˆå•†å“ã®è²©å£²ï¼‰</h6>
                    <p class="japanese-text">å½“ç¤¾ã¯ã€æœ¬ã‚µãƒ¼ãƒ“ã‚¹ä¸Šã§å•†å“ã‚’è²©å£²ã„ãŸã—ã¾ã™ã€‚å•†å“ã®ä¾¡æ ¼ã€ä»•æ§˜ã€åœ¨åº«ç­‰ã¯äºˆå‘Šãªãå¤‰æ›´ã•ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚</p>
                    
                    <h6 class="japanese-heading">ç¬¬4æ¡ï¼ˆç¦æ­¢äº‹é …ï¼‰</h6>
                    <p class="japanese-text">ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã€æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã®åˆ©ç”¨ã«ã‚ãŸã‚Šã€ä»¥ä¸‹ã®è¡Œç‚ºã‚’ã—ã¦ã¯ãªã‚Šã¾ã›ã‚“ã€‚</p>
                    <ul class="japanese-text">
                        <li class="japanese-text">æ³•ä»¤ã¾ãŸã¯å…¬åºè‰¯ä¿—ã«é•åã™ã‚‹è¡Œç‚º</li>
                        <li class="japanese-text">çŠ¯ç½ªè¡Œç‚ºã«é–¢é€£ã™ã‚‹è¡Œç‚º</li>
                        <li class="japanese-text">å½“ç¤¾ã®ã‚µãƒ¼ãƒ“ã‚¹ã®å†…å®¹ç­‰ã€å½“ç¤¾ã‚µãƒ¼ãƒ“ã‚¹ã«å«ã¾ã‚Œã‚‹è‘—ä½œæ¨©ã€å•†æ¨™æ¨©ã»ã‹çŸ¥çš„è²¡ç”£æ¨©ã‚’ä¾µå®³ã™ã‚‹è¡Œç‚º</li>
                        <li class="japanese-text">ãã®ä»–ã€å½“ç¤¾ãŒä¸é©åˆ‡ã¨åˆ¤æ–­ã™ã‚‹è¡Œç‚º</li>
                    </ul>
                    
                    <h6 class="japanese-heading">ç¬¬5æ¡ï¼ˆæœ¬ã‚µãƒ¼ãƒ“ã‚¹ã®æä¾›ã®åœæ­¢ç­‰ï¼‰</h6>
                    <p class="japanese-text">å½“ç¤¾ã¯ã€ä»¥ä¸‹ã®ã„ãšã‚Œã‹ã®äº‹ç”±ãŒã‚ã‚‹ã¨åˆ¤æ–­ã—ãŸå ´åˆã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«äº‹å‰ã«é€šçŸ¥ã™ã‚‹ã“ã¨ãªãæœ¬ã‚µãƒ¼ãƒ“ã‚¹ã®å…¨éƒ¨ã¾ãŸã¯ä¸€éƒ¨ã®æä¾›ã‚’åœæ­¢ã¾ãŸã¯ä¸­æ–­ã™ã‚‹ã“ã¨ãŒã§ãã‚‹ã‚‚ã®ã¨ã—ã¾ã™ã€‚</p>
                    <ul class="japanese-text">
                        <li class="japanese-text">æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã«ã‹ã‹ã‚‹ã‚³ãƒ³ãƒ”ãƒ¥ãƒ¼ã‚¿ã‚·ã‚¹ãƒ†ãƒ ã®ä¿å®ˆç‚¹æ¤œã¾ãŸã¯æ›´æ–°ã‚’è¡Œã†å ´åˆ</li>
                        <li class="japanese-text">åœ°éœ‡ã€è½é›·ã€ç«ç½ã€åœé›»ã¾ãŸã¯å¤©ç½ãªã©ã®ä¸å¯æŠ—åŠ›ã«ã‚ˆã‚Šã€æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã®æä¾›ãŒå›°é›£ã¨ãªã£ãŸå ´åˆ</li>
                        <li class="japanese-text">ãã®ä»–ã€å½“ç¤¾ãŒæœ¬ã‚µãƒ¼ãƒ“ã‚¹ã®æä¾›ãŒå›°é›£ã¨åˆ¤æ–­ã—ãŸå ´åˆ</li>
                    </ul>
                    
                    <h6 class="japanese-heading">ç¬¬6æ¡ï¼ˆå…è²¬äº‹é …ï¼‰</h6>
                    <p class="japanese-text">å½“ç¤¾ã¯ã€æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã«äº‹å®Ÿä¸Šã¾ãŸã¯æ³•å¾‹ä¸Šã®ç‘•ç–µï¼ˆå®‰å…¨æ€§ã€ä¿¡é ¼æ€§ã€æ­£ç¢ºæ€§ã€å®Œå…¨æ€§ã€æœ‰åŠ¹æ€§ã€ç‰¹å®šã®ç›®çš„ã¸ã®é©åˆæ€§ã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãªã©ã«é–¢ã™ã‚‹æ¬ é™¥ã€ã‚¨ãƒ©ãƒ¼ã‚„ãƒã‚°ã€æ¨©åˆ©ä¾µå®³ãªã©ã‚’å«ã¿ã¾ã™ã€‚ï¼‰ãŒãªã„ã“ã¨ã‚’æ˜ç¤ºçš„ã«ã‚‚é»™ç¤ºçš„ã«ã‚‚ä¿è¨¼ã—ã¦ãŠã‚Šã¾ã›ã‚“ã€‚</p>
                    
                    <h6 class="japanese-heading">ç¬¬7æ¡ï¼ˆæº–æ‹ æ³•ãƒ»è£åˆ¤ç®¡è½„ï¼‰</h6>
                    <p class="japanese-text">æœ¬åˆ©ç”¨è¦ç´„ã®è§£é‡ˆã«ã‚ãŸã£ã¦ã¯ã€æ—¥æœ¬æ³•ã‚’æº–æ‹ æ³•ã¨ã—ã¾ã™ã€‚æœ¬ã‚µãƒ¼ãƒ“ã‚¹ã«é–¢ã—ã¦ç´›äº‰ãŒç”Ÿã˜ãŸå ´åˆã«ã¯ã€å½“ç¤¾ã®æœ¬åº—æ‰€åœ¨åœ°ã‚’ç®¡è½„ã™ã‚‹è£åˆ¤æ‰€ã‚’å°‚å±çš„åˆæ„ç®¡è½„ã¨ã—ã¾ã™ã€‚</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary japanese-text" data-bs-dismiss="modal">é–‰ã˜ã‚‹</button>
                </div>
            </div>
        </div>
    </div>

    <!-- ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ Modal -->
    <div class="modal fade" id="privacyModal" tabindex="-1" aria-labelledby="privacyModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header bg-dark text-white">
                    <h5 class="modal-title japanese-heading" id="privacyModalLabel">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body japanese-text" style="max-height: 400px; overflow-y: auto;">
                    <h6 class="japanese-heading">1. å€‹äººæƒ…å ±ã®åé›†ã«ã¤ã„ã¦</h6>
                    <p class="japanese-text">å½“ç¤¾ã¯ã€ãŠå®¢æ§˜ã‹ã‚‰ä»¥ä¸‹ã®å€‹äººæƒ…å ±ã‚’åé›†ã„ãŸã—ã¾ã™ï¼š</p>
                    <ul class="japanese-text">
                        <li class="japanese-text">ãŠåå‰ã€ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ã€é›»è©±ç•ªå·</li>
                        <li class="japanese-text">é…é€å…ˆä½æ‰€</li>
                        <li class="japanese-text">æ±ºæ¸ˆæƒ…å ±ï¼ˆã‚¯ãƒ¬ã‚¸ãƒƒãƒˆã‚«ãƒ¼ãƒ‰æƒ…å ±ã¯Stripeç¤¾ãŒç®¡ç†ï¼‰</li>
                        <li class="japanese-text">è³¼å…¥å±¥æ­´</li>
                    </ul>
                    
                    <h6 class="japanese-heading">2. å€‹äººæƒ…å ±ã®åˆ©ç”¨ç›®çš„</h6>
                    <p class="japanese-text">åé›†ã—ãŸå€‹äººæƒ…å ±ã¯ä»¥ä¸‹ã®ç›®çš„ã§åˆ©ç”¨ã„ãŸã—ã¾ã™ï¼š</p>
                    <ul class="japanese-text">
                        <li class="japanese-text">å•†å“ã®é…é€</li>
                        <li class="japanese-text">æ³¨æ–‡ç¢ºèªãƒ»æ±ºæ¸ˆå‡¦ç†</li>
                        <li class="japanese-text">ãŠå®¢æ§˜ã‚µãƒãƒ¼ãƒˆ</li>
                        <li class="japanese-text">ã‚µãƒ¼ãƒ“ã‚¹ã®æ”¹å–„</li>
                    </ul>
                    
                    <h6 class="japanese-heading">3. å€‹äººæƒ…å ±ã®ç¬¬ä¸‰è€…æä¾›</h6>
                    <p class="japanese-text">å½“ç¤¾ã¯ã€æ³•ä»¤ã«åŸºã¥ãå ´åˆã‚’é™¤ãã€ãŠå®¢æ§˜ã®åŒæ„ãªãå€‹äººæƒ…å ±ã‚’ç¬¬ä¸‰è€…ã«æä¾›ã„ãŸã—ã¾ã›ã‚“ã€‚</p>
                    
                    <h6 class="japanese-heading">4. å€‹äººæƒ…å ±ã®ç®¡ç†</h6>
                    <p class="japanese-text">å½“ç¤¾ã¯ã€å€‹äººæƒ…å ±ã®æ¼æ´©ã€æ»…å¤±ã€æ¯€æã®é˜²æ­¢ã«åŠªã‚ã¾ã™ã€‚</p>
                    
                    <h6 class="japanese-heading">5. ãŠå•ã„åˆã‚ã›</h6>
                    <p class="japanese-text">å€‹äººæƒ…å ±ã«é–¢ã™ã‚‹ãŠå•ã„åˆã‚ã›ã¯ä»¥ä¸‹ã¾ã§ã”é€£çµ¡ãã ã•ã„ï¼š</p>
                    <p class="japanese-text">ãƒ¡ãƒ¼ãƒ«: info@aether-store.jp</p>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary japanese-text" data-bs-dismiss="modal">é–‰ã˜ã‚‹</button>
                </div>
            </div>
        </div>
    </div>


    <!-- Start Script -->
    <script src="assets/js/jquery-1.11.0.min.js"></script>
    <script src="assets/js/jquery-migrate-1.2.1.min.js"></script>
    <script src="assets/js/bootstrap.bundle.min.js"></script>
    <script src="assets/js/templatemo.js"></script>
    

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-firestore.js"></script>
    
    <!-- ì• í”Œë¦¬ì¼€ì´ì…˜ ìŠ¤í¬ë¦½íŠ¸ -->
    <script src="assets/js/logging-utils.js"></script>
    <script src="assets/js/firebase-config-new.js"></script>
    <script src="assets/js/auth-utils-new.js"></script>
    <script src="assets/js/custom.js"></script>
    
    <script>
        // ì•Œë¦¼ ë©”ì‹œì§€ í‘œì‹œ í•¨ìˆ˜ (ì „ì—­)
        function showAlert(message, type = 'danger') {
            const alertDiv = document.getElementById('register-alert');
            if (!alertDiv) {
                console.error('register-alert ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                console.log('ì•Œë¦¼:', message);
                return;
            }
            
            alertDiv.className = 'alert alert-' + type;
            alertDiv.innerHTML = '<div class="japanese-text">' + message + '</div>';
            alertDiv.style.display = 'block';
            
            // 5ì´ˆ í›„ ìë™ ìˆ¨ê¹€
            setTimeout(() => {
                alertDiv.style.display = 'none';
            }, 5000);
            
            // í˜ì´ì§€ ìƒë‹¨ìœ¼ë¡œ ìŠ¤í¬ë¡¤
            alertDiv.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
        }

        // ë¹„ë°€ë²ˆí˜¸ ê°•ë„ ì²´í¬ í•¨ìˆ˜
        function checkPasswordStrength(password) {
            let strength = 0;
            let text = '';
            let className = '';

            if (password.length >= 8) strength += 1;
            if (/[a-z]/.test(password)) strength += 1;
            if (/[A-Z]/.test(password)) strength += 1;
            if (/[0-9]/.test(password)) strength += 1;
            if (/[^A-Za-z0-9]/.test(password)) strength += 1;

            if (strength <= 2) {
                text = 'å¼±ã„';
                className = 'strength-weak';
            } else if (strength <= 3) {
                text = 'æ™®é€š';
                className = 'strength-medium';
            } else {
                text = 'å¼·ã„';
                className = 'strength-strong';
            }

            const fillElement = document.getElementById('strength-fill');
            const textElement = document.getElementById('strength-text');
            
            fillElement.style.width = (strength * 20) + '%';
            fillElement.className = 'strength-fill ' + className;
            textElement.textContent = 'ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å¼·åº¦: ' + text;
        }

        // íŒ¨ìŠ¤ì›Œë“œ í† ê¸€
        document.getElementById('toggle-password').addEventListener('click', function() {
            const passwordInput = document.getElementById('password');
            const icon = this.querySelector('i');
            if (passwordInput.type === 'password') {
                passwordInput.type = 'text';
                icon.className = 'fas fa-eye-slash';
            } else {
                passwordInput.type = 'password';
                icon.className = 'fas fa-eye';
            }
        });

        // íŒ¨ìŠ¤ì›Œë“œ ê°•ë„ ì‹¤ì‹œê°„ ì²´í¬
        document.getElementById('password').addEventListener('input', function() {
            checkPasswordStrength(this.value);
        });



        // íŒì—… ëª¨ë‹¬ í•¨ìˆ˜ë“¤
        function showTermsModal() {
            const termsModal = new bootstrap.Modal(document.getElementById('termsModal'));
            termsModal.show();
        }

        function showPrivacyModal() {
            const privacyModal = new bootstrap.Modal(document.getElementById('privacyModal'));
            privacyModal.show();
        }

        // Firebase ì„œë¹„ìŠ¤ ìƒíƒœ ì²´í¬
        function checkFirebaseStatus() {
            console.log('=== Firebase ìƒíƒœ ì²´í¬ ===');
            console.log('- firebase ê°ì²´:', typeof firebase !== 'undefined' ? 'OK' : 'MISSING');
            console.log('- FirebaseService í´ë˜ìŠ¤:', typeof FirebaseService !== 'undefined' ? 'OK' : 'MISSING');
            console.log('- firebase.auth:', typeof firebase !== 'undefined' && firebase.auth ? 'OK' : 'MISSING');
            console.log('- firebase.firestore:', typeof firebase !== 'undefined' && firebase.firestore ? 'OK' : 'MISSING');
            
            // Firebase ì„¤ì • í™•ì¸
            if (typeof firebase !== 'undefined' && firebase.apps && firebase.apps.length > 0) {
                const app = firebase.apps[0];
                console.log('- Firebase ì•± ì´ë¦„:', app.name);
                console.log('- Firebase ì•± ì˜µì…˜:', app.options);
            }
            
            // FirebaseService ì‚¬ìš© ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸
            if (typeof FirebaseService !== 'undefined') {
                console.log('- FirebaseService.isFirebaseAvailable():', FirebaseService.isFirebaseAvailable());
            }
            
            console.log('=== Firebase ìƒíƒœ ì²´í¬ ì™„ë£Œ ===');
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì‹¤í–‰
        document.addEventListener('DOMContentLoaded', function() {
            console.log('=== register.html DOMContentLoaded ì‹œì‘ ===');
            
            // ë„¤íŠ¸ì›Œí¬ ìƒíƒœ í™•ì¸
            if (!navigator.onLine) {
                console.warn('âš ï¸ ì˜¤í”„ë¼ì¸ ìƒíƒœì…ë‹ˆë‹¤. ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•´ì£¼ì„¸ìš”.');
                alert('ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•´ì£¼ì„¸ìš”.');
                return;
            }
            
            // Firebase ì´ˆê¸°í™” ì™„ë£Œ ëŒ€ê¸°
            let firebaseReady = false;
            let attempts = 0;
            const maxAttempts = 50; // 5ì´ˆ ëŒ€ê¸°
            
            const checkFirebase = async () => {
                while (!firebaseReady && attempts < maxAttempts) {
                    attempts++;
                    console.log(`Firebase ì´ˆê¸°í™” ëŒ€ê¸° ì¤‘... (${attempts}/${maxAttempts})`);
                    
                    // ë„¤íŠ¸ì›Œí¬ ìƒíƒœ ì¬í™•ì¸
                    if (!navigator.onLine) {
                        console.error('âŒ ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì´ ëŠì–´ì¡ŒìŠµë‹ˆë‹¤.');
                        alert('ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì´ ëŠì–´ì¡ŒìŠµë‹ˆë‹¤. ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•´ì£¼ì„¸ìš”.');
                        return;
                    }
                    
                    if (typeof firebase !== 'undefined' && firebase.auth && firebase.firestore) {
                        firebaseReady = true;
                        console.log('âœ… Firebase ì´ˆê¸°í™” ì™„ë£Œ');
                        break;
                    } else {
                        await new Promise(resolve => setTimeout(resolve, 100));
                    }
                }
                
                if (!firebaseReady) {
                    console.error('âŒ Firebase ì´ˆê¸°í™” ì‹œê°„ ì´ˆê³¼');
                    console.error('ë„¤íŠ¸ì›Œí¬ ìƒíƒœ:', navigator.onLine ? 'ì˜¨ë¼ì¸' : 'ì˜¤í”„ë¼ì¸');
                    alert('Firebase ì—°ê²°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•˜ê³  í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.');
                    return;
                }
                
                // FirebaseService ë¡œë“œ í™•ì¸
                if (typeof FirebaseService !== 'undefined') {
                    console.log('âœ… FirebaseService ë¡œë“œ ì™„ë£Œ');
                    console.log('FirebaseService.isFirebaseAvailable():', FirebaseService.isFirebaseAvailable());
                } else {
                    console.warn('âš ï¸ FirebaseServiceê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤');
                }
                
                // ì‚¬ìš©ì ë©”ë‰´ ì—…ë°ì´íŠ¸
                if (typeof window.updateUserMenu === 'function') {
                    console.log('auth-utils.js updateUserMenu í•¨ìˆ˜ í˜¸ì¶œ');
                    window.updateUserMenu();
                } else {
                    console.warn('auth-utils.js updateUserMenu í•¨ìˆ˜ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤');
                }
                
                // ëª¨ë°”ì¼ QRì½”ë“œ ì œì–´ ì´ˆê¸°í™”
                if (typeof setupMobileQRCodeControl === 'function') {
                    setupMobileQRCodeControl();
                }
                
                // ì¥ë°”êµ¬ë‹ˆ ì¹´ìš´íŠ¸ ì—…ë°ì´íŠ¸
                if (typeof window.updateCartCount === 'function') {
                    window.updateCartCount();
                }
                
                // Firebase ìƒíƒœ ì²´í¬ (ê¸°ì¡´ ê¸°ëŠ¥ ìœ ì§€)
                setTimeout(checkFirebaseStatus, 1000);
            };
            
            checkFirebase();
        });


        // ì´ì „ í˜ì´ì§€ URL ê´€ë¦¬
        function getReturnUrl() {
            const returnUrl = localStorage.getItem('aetherReturnUrl') || 'index.html';
            localStorage.removeItem('aetherReturnUrl'); // ì‚¬ìš© í›„ ì‚­ì œ
            return returnUrl;
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ì´ì „ í˜ì´ì§€ ì •ë³´ ì €ì¥
        document.addEventListener('DOMContentLoaded', function() {
            const referrer = document.referrer;
            if (referrer && !referrer.includes('register.html') && !referrer.includes('login.html')) {
                localStorage.setItem('aetherReturnUrl', referrer);
            } else {
                // ê¸°ë³¸ê°’ ì„¤ì •
                localStorage.setItem('aetherReturnUrl', 'index.html');
            }
        });
        
        // ìƒˆë¡œìš´ íšŒì›ê°€ì… ì²˜ë¦¬ (Firebase ì§ì ‘ ì €ì¥)
        console.log('ğŸ”§ ìƒˆë¡œìš´ íšŒì›ê°€ì… ì²˜ë¦¬ ì‹œìŠ¤í…œ ì´ˆê¸°í™”');
        
        // í¼ ê¸°ë³¸ ì œì¶œ ë™ì‘ ì°¨ë‹¨
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ”§ DOM ë¡œë“œ ì™„ë£Œ, í¼ ê¸°ë³¸ ë™ì‘ ì°¨ë‹¨ ì‹œì‘');
            
            // í¼ ê¸°ë³¸ ì œì¶œ ë™ì‘ ì°¨ë‹¨
            const registerForm = document.getElementById('register-form');
            if (registerForm) {
                registerForm.addEventListener('submit', function(e) {
                    e.preventDefault();
                    e.stopPropagation();
                    e.stopImmediatePropagation();
                    console.log('ğŸš« í¼ ê¸°ë³¸ ì œì¶œ ë™ì‘ ì°¨ë‹¨ë¨');
                    return false;
                });
                console.log('âœ… í¼ ê¸°ë³¸ ì œì¶œ ë™ì‘ ì°¨ë‹¨ ì™„ë£Œ');
            }
        });

        // ì›°ì»´ ë³´ë„ˆìŠ¤ ëª¨ë‹¬ í‘œì‹œ í•¨ìˆ˜
        function showWelcomeBonusModal() {
            const modalHTML = `
                <div class="modal fade" id="welcomeBonusModal" tabindex="-1" aria-labelledby="welcomeBonusModalLabel" aria-hidden="true" data-bs-backdrop="static" data-bs-keyboard="false">
                    <div class="modal-dialog modal-dialog-centered">
                        <div class="modal-content border-0 shadow-lg" style="max-width: 500px; border-radius: 20px;">
                            <div class="modal-header border-0 pb-0">
                                <button type="button" class="btn-close" onclick="closeWelcomeBonusModal()" aria-label="Close"></button>
                            </div>
                            <div class="modal-body text-center px-5 pt-0 pb-5">
                                <div class="mb-4">
                                    <!-- ì„ ë¬¼ ì•„ì´ì½˜ -->
                                    <div class="mx-auto mb-3" style="width: 100px; height: 100px; background: linear-gradient(135deg, #6c757d 0%, #495057 100%); border-radius: 50%; display: flex; align-items: center; justify-content: center;">
                                        <i class="fas fa-gift text-white" style="font-size: 48px;"></i>
                                    </div>
                                    
                                    <!-- ì›°ì»´ ë©”ì‹œì§€ -->
                                    <h3 class="japanese-heading text-dark mb-3" style="font-weight: 600;">ğŸ‰ ã‚¦ã‚§ãƒ«ã‚«ãƒ ãƒœãƒ¼ãƒŠã‚¹ï¼</h3>
                                    <p class="japanese-text text-muted mb-4" style="line-height: 1.6;">
                                        Aetherã«ã”ç™»éŒ²ã„ãŸã ãã€ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼<br>
                                        <strong class="text-dark">300ãƒã‚¤ãƒ³ãƒˆ</strong>ã‚’ãƒ—ãƒ¬ã‚¼ãƒ³ãƒˆã„ãŸã—ã¾ã™ã€‚
                                    </p>
                                    
                                    <!-- í¬ì¸íŠ¸ í‘œì‹œ -->
                                    <div class="bg-light rounded-pill p-3 mb-4">
                                        <div class="d-flex align-items-center justify-content-center">
                                            <i class="fas fa-coins text-secondary me-2" style="font-size: 24px;"></i>
                                            <span class="h4 mb-0 text-dark fw-bold">300 pt</span>
                                        </div>
                                    </div>
                                    
                                    <p class="japanese-text text-muted small mb-4">
                                        ãƒã‚¤ãƒ³ãƒˆã”åˆ©ç”¨æ–¹æ³•<br>
                                        *ãƒã‚¤ãƒ³ãƒˆä»˜ä¸æ–¹æ³•ã¯aether-store.jp å…¬å¼ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã€ã¾ãŸã¯åº—é ­ã«ã¦ã€è³¼å…¥é‡‘é¡ã«å¯¾ã—ã€3%ã®ãƒã‚¤ãƒ³ãƒˆãŒä»˜ä¸ã•ã‚Œã¾ã™ã€‚<br>
                                        **ç²å¾—ã•ã‚ŒãŸãƒã‚¤ãƒ³ãƒˆã¯ã€aether-store.jp å…¬å¼ã‚¦ã‚§ãƒ–ã‚µã‚¤ãƒˆã€ã¾ãŸã¯åº—é ­ã«ã¦ã€ãƒã‚¤ãƒ³ãƒˆé‡‘é¡ã«å¿œã˜ãŸå•†å“ã¨äº¤æ›ã„ãŸã ã‘ã¾ã™ã€‚
                                    </p>
                                </div>
                                
                                <div class="d-grid gap-2">
                                    <button type="button" class="btn btn-secondary rounded-pill py-3 mb-2" onclick="goToPointsPage()" style="font-weight: 500; font-size: 16px;">
                                        <i class="fas fa-coins me-2"></i>ãƒã‚¤ãƒ³ãƒˆãƒšãƒ¼ã‚¸ã§ç¢ºèªã™ã‚‹
                                    </button>
                                    <button type="button" class="btn btn-outline-secondary rounded-pill py-2" onclick="goToPreviousPage()" style="font-weight: 500;">
                                        <i class="fas fa-check me-2"></i>ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ï¼
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            
            // ê¸°ì¡´ ëª¨ë‹¬ì´ ìˆìœ¼ë©´ ì œê±°
            const existingModal = document.getElementById('welcomeBonusModal');
            if (existingModal) {
                existingModal.remove();
            }
            
            // ëª¨ë‹¬ HTML ì¶”ê°€
            document.body.insertAdjacentHTML('beforeend', modalHTML);
            
            // ëª¨ë‹¬ í‘œì‹œ (ìë™ ë‹«í˜ ë°©ì§€ ì„¤ì •)
            const modal = new bootstrap.Modal(document.getElementById('welcomeBonusModal'), {
                backdrop: 'static',    // ë°°ê²½ í´ë¦­ìœ¼ë¡œ ë‹«ê¸° ë°©ì§€
                keyboard: false        // ESC í‚¤ë¡œ ë‹«ê¸° ë°©ì§€
            });
            modal.show();
            
            // ëª¨ë‹¬ì´ ë‹«í ë•Œ ì œê±°
            document.getElementById('welcomeBonusModal').addEventListener('hidden.bs.modal', function() {
                this.remove();
            });
        }

        // í¬ì¸íŠ¸ í˜ì´ì§€ë¡œ ì´ë™í•˜ëŠ” í•¨ìˆ˜
        function goToPointsPage() {
            const modal = bootstrap.Modal.getInstance(document.getElementById('welcomeBonusModal'));
            if (modal) {
                modal.hide();
            }
            // íšŒì›ê°€ì… ì„±ê³µ í›„ í¬ì¸íŠ¸ í˜ì´ì§€ë¡œ ì´ë™
            setTimeout(() => {
                window.location.href = 'points.html';
            }, 300);
        }

        // ì´ì „ í˜ì´ì§€ë¡œ ëŒì•„ê°€ëŠ” í•¨ìˆ˜
        function goToPreviousPage() {
            const modal = bootstrap.Modal.getInstance(document.getElementById('welcomeBonusModal'));
            if (modal) {
                modal.hide();
            }
            // ëª¨ë‹¬ì´ ì™„ì „íˆ ë‹«íŒ í›„ ë©”ì¸ í˜ì´ì§€ë¡œ ì´ë™ (ì‹ ê·œê°€ì… ì™„ë£Œ)
            setTimeout(() => {
                window.location.href = 'index.html';
            }, 300);
        }

        // ì›°ì»´ ë³´ë„ˆìŠ¤ ëª¨ë‹¬ ë‹«ê¸° í•¨ìˆ˜ (X ë²„íŠ¼ìš©)
        function closeWelcomeBonusModal() {
            const modal = bootstrap.Modal.getInstance(document.getElementById('welcomeBonusModal'));
            if (modal) {
                modal.hide();
            }
            // ëª¨ë‹¬ì´ ì™„ì „íˆ ë‹«íŒ í›„ ë©”ì¸ í˜ì´ì§€ë¡œ ì´ë™
            setTimeout(() => {
                window.location.href = 'index.html';
            }, 300);
        }

        // ìƒˆë¡œìš´ íšŒì›ê°€ì… ì²˜ë¦¬ (Firebase ì§ì ‘ ì €ì¥)
        console.log('ğŸ”§ ìƒˆë¡œìš´ íšŒì›ê°€ì… ì²˜ë¦¬ ì‹œìŠ¤í…œ ì‹œì‘');
        
        // íšŒì›ê°€ì… ë²„íŠ¼ì— ìƒˆë¡œìš´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
        const registerButton = document.querySelector('button[type="submit"]');
        if (registerButton) {
            console.log('âœ… íšŒì›ê°€ì… ë²„íŠ¼ ë°œê²¬, ìƒˆë¡œìš´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡');
            
            // ìƒˆë¡œìš´ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ë“±ë¡ (ê¸°ë³¸ ë™ì‘ ì°¨ë‹¨ í¬í•¨)
            registerButton.addEventListener('click', async function(e) {
                console.log('ğŸš€ ìƒˆë¡œìš´ íšŒì›ê°€ì… ì²˜ë¦¬ ì‹œì‘!');
                
                // ëª¨ë“  ê¸°ë³¸ ë™ì‘ ì°¨ë‹¨
                e.preventDefault();
                e.stopPropagation();
                e.stopImmediatePropagation();
                
                const email = document.getElementById('email').value.trim();
                const password = document.getElementById('password').value;
                const confirmPassword = document.getElementById('confirm-password').value;
                const agreeTerms = document.getElementById('agree-terms').checked;
                
                console.log('ğŸ“ íšŒì›ê°€ì… ë°ì´í„°:', { email, password: '***', confirmPassword: '***', agreeTerms });
                
                // ìœ íš¨ì„± ê²€ì‚¬
                if (!email || !password || !confirmPassword) {
                    showAlert('ã™ã¹ã¦ã®é …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                    return;
                }

                if (password !== confirmPassword) {
                    showAlert('ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ãŒä¸€è‡´ã—ã¾ã›ã‚“ã€‚');
                    return;
                }

                if (password.length < 8) {
                    showAlert('ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã¯8æ–‡å­—ä»¥ä¸Šã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                    return;
                }

                if (!agreeTerms) {
                    showAlert('åˆ©ç”¨è¦ç´„ã«åŒæ„ã—ã¦ãã ã•ã„ã€‚');
                    return;
                }

                // ì´ë©”ì¼ì—ì„œ ì´ë¦„ ì¶”ì¶œ
                const name = email.split('@')[0] || 'ãƒ¦ãƒ¼ã‚¶ãƒ¼';

                // ë²„íŠ¼ ë¹„í™œì„±í™”
                const submitBtn = this;
                const originalText = submitBtn.innerHTML;
                submitBtn.disabled = true;
                submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>ã‚¢ã‚«ã‚¦ãƒ³ãƒˆä½œæˆä¸­...';

                try {
                    console.log('ğŸ”¥ ìƒˆë¡œìš´ Firebase íšŒì›ê°€ì… ì²˜ë¦¬ ì‹œì‘:', email);
                    
                    // ë„¤íŠ¸ì›Œí¬ ìƒíƒœ í™•ì¸
                    if (!navigator.onLine) {
                        throw new Error('ë„¤íŠ¸ì›Œí¬ ì—°ê²°ì´ ëŠì–´ì¡ŒìŠµë‹ˆë‹¤. ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•´ì£¼ì„¸ìš”.');
                    }
                    
                    // Firebase ì´ˆê¸°í™” ìƒíƒœ í™•ì¸
                    if (typeof FirebaseService === 'undefined') {
                        throw new Error('Firebase ì„œë¹„ìŠ¤ê°€ ë¡œë“œë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.');
                    }
                    
                    // Firebase ì‚¬ìš© ê°€ëŠ¥ ì—¬ë¶€ í™•ì¸
                    if (!FirebaseService.isFirebaseAvailable()) {
                        console.warn('âš ï¸ Firebase ì‚¬ìš© ë¶ˆê°€, ì¬ì‹œë„ ì¤‘...');
                        // Firebase ì´ˆê¸°í™” ëŒ€ê¸°
                        let attempts = 0;
                        while (!FirebaseService.isFirebaseAvailable() && attempts < 10) {
                            await new Promise(resolve => setTimeout(resolve, 500));
                            attempts++;
                        }
                        
                        if (!FirebaseService.isFirebaseAvailable()) {
                            throw new Error('Firebase ì—°ê²°ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•˜ê³  í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•´ì£¼ì„¸ìš”.');
                        }
                    }
                    
                    console.log('âœ… Firebase ì‚¬ìš© ê°€ëŠ¥, íšŒì›ê°€ì… ì§„í–‰');
                    
                    const userData = {
                        name: name,
                        firstName: name.split(' ')[0] || name,
                        lastName: name.split(' ').slice(1).join(' ') || '',
                        phone: '',
                        address: ''
                    };
                    
                    // Firebase íšŒì›ê°€ì… ì²˜ë¦¬ (ì¬ì‹œë„ ë©”ì»¤ë‹ˆì¦˜ í¬í•¨)
                    const result = await FirebaseService.registerUser(email, password, userData);
                    console.log('ğŸ”¥ ìƒˆë¡œìš´ Firebase íšŒì›ê°€ì… ê²°ê³¼:', result);
                    
                    if (result.success) {
                        console.log('âœ… ìƒˆë¡œìš´ Firebase íšŒì›ê°€ì… ì„±ê³µ');
                        
                        // Firestoreì— ì‚¬ìš©ì ë°ì´í„°ê°€ ì‹¤ì œë¡œ ì €ì¥ë˜ì—ˆëŠ”ì§€ í™•ì¸
                        try {
                            console.log('ğŸ” Firestore ì €ì¥ í™•ì¸ ì¤‘...');
                            const db = firebase.firestore();
                            const userDoc = await db.collection('users').doc(result.user.uid).get();
                            
                            if (userDoc.exists) {
                                const userData = userDoc.data();
                                console.log('âœ… Firestore ì €ì¥ í™•ì¸ ì„±ê³µ:', userData);
                                showAlert('âœ… ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãŒæ­£å¸¸ã«ä½œæˆã•ã‚Œã¾ã—ãŸï¼(Firebase ã«ä¿å­˜æ¸ˆã¿)', 'success');
                            } else {
                                console.warn('âš ï¸ Firestoreì— ì‚¬ìš©ì ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤');
                                showAlert('âš ï¸ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯ä½œæˆã•ã‚Œã¾ã—ãŸãŒã€ãƒ‡ãƒ¼ã‚¿ã®ä¿å­˜ã«å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚', 'warning');
                            }
                        } catch (verifyError) {
                            console.warn('âš ï¸ Firestore ì €ì¥ í™•ì¸ ì‹¤íŒ¨:', verifyError);
                            showAlert('âš ï¸ ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯ä½œæˆã•ã‚Œã¾ã—ãŸãŒã€ãƒ‡ãƒ¼ã‚¿ã®ç¢ºèªã«å¤±æ•—ã—ã¾ã—ãŸã€‚', 'warning');
                        }
                        
                        // ìë™ ë¡œê·¸ì¸
                        try {
                            const loginResult = await FirebaseService.loginUser(email, password);
                            if (loginResult.success) {
                                console.log('âœ… ìë™ ë¡œê·¸ì¸ ì„±ê³µ');
                                
                                // ë¡œê·¸ì¸ ìƒíƒœë¥¼ localStorageì— ì €ì¥
                                const loginStatus = {
                                    uid: loginResult.user.uid,
                                    email: loginResult.user.email,
                                    name: loginResult.user.name || loginResult.user.displayName,
                                    loginTime: new Date().toISOString(),
                                    isFirebase: true
                                };
                                localStorage.setItem('aetherLoginStatus', JSON.stringify(loginStatus));
                                
                                // ì›°ì»´ ë³´ë„ˆìŠ¤ ëª¨ë‹¬ í‘œì‹œ (ìë™ ë¦¬ë‹¤ì´ë ‰íŠ¸ ëŒ€ì‹ )
                                showWelcomeBonusModal();
                            } else {
                                throw new Error(loginResult.error || 'ìë™ ë¡œê·¸ì¸ ì‹¤íŒ¨');
                            }
                        } catch (loginError) {
                            console.warn('âš ï¸ ìë™ ë¡œê·¸ì¸ ì‹¤íŒ¨:', loginError);
                            showAlert('ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¯ä½œæˆã•ã‚Œã¾ã—ãŸãŒã€è‡ªå‹•ãƒ­ã‚°ã‚¤ãƒ³ã«å¤±æ•—ã—ã¾ã—ãŸã€‚æ‰‹å‹•ã§ãƒ­ã‚°ã‚¤ãƒ³ã—ã¦ãã ã•ã„ã€‚', 'warning');
                            setTimeout(() => window.location.href = 'login.html', 2000);
                        }
                        return;
                    } else {
                        // ë¸”ë™ë¦¬ìŠ¤íŠ¸ ì—ëŸ¬ì¸ ê²½ìš° íŠ¹ë³„í•œ ë©”ì‹œì§€ í‘œì‹œ
                        if (result.isBlacklisted && result.canRejoinAfter) {
                            const rejoinDate = new Date(result.canRejoinAfter).toLocaleDateString('ja-JP');
                            showAlert(`âŒ ${result.error}\n\nå†ç™»éŒ²å¯èƒ½æ—¥: ${rejoinDate}`, 'warning');
                        } else {
                            // FirebaseServiceì—ì„œ ì´ë¯¸ êµ¬ì²´ì ì¸ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ì œê³µí•˜ë¯€ë¡œ ê·¸ëŒ€ë¡œ ì‚¬ìš©
                            throw new Error(result.error || 'Firebase íšŒì›ê°€ì… ì‹¤íŒ¨');
                        }
                    }
                    
                } catch (error) {
                    console.error('âŒ ìƒˆë¡œìš´ íšŒì›ê°€ì… ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜:', error);
                    console.error('âŒ ì˜¤ë¥˜ ìƒì„¸ ì •ë³´:', {
                        name: error.name,
                        message: error.message,
                        stack: error.stack
                    });
                    
                    // FirebaseServiceì—ì„œ ì´ë¯¸ êµ¬ì²´ì ì¸ ì—ëŸ¬ ë©”ì‹œì§€ë¥¼ ì œê³µí•˜ë¯€ë¡œ ê·¸ëŒ€ë¡œ ì‚¬ìš©
                    let errorMessage = error.message || 'íšŒì›ê°€ì…ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.';
                    
                    // ë„¤íŠ¸ì›Œí¬ ê´€ë ¨ ì—ëŸ¬ì¸ ê²½ìš° ì¶”ê°€ ì•ˆë‚´
                    if (error.message && (
                        error.message.includes('network') || 
                        error.message.includes('connection') || 
                        error.message.includes('timeout') ||
                        error.message.includes('Firebase ì—°ê²°ì´ í•„ìš”í•©ë‹ˆë‹¤')
                    )) {
                        errorMessage += '\n\nì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•˜ê³  í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.';
                    }
                    
                    showAlert('âŒ ' + errorMessage, 'danger');
                    
                    // ë²„íŠ¼ ë³µì›
                    submitBtn.disabled = false;
                    submitBtn.innerHTML = originalText;
                }
            });
        } else {
            console.error('âŒ íšŒì›ê°€ì… ë²„íŠ¼ ìš”ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŒ');
        }

    </script>
</body>
</html>
