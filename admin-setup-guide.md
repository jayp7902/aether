# 관리자 시스템 설정 가이드

## 1. Firebase에서 관리자 설정

### A. 관리자 컬렉션 생성
1. **Firebase Console** → **Firestore Database** → **데이터** 탭
2. **컬렉션 시작** 클릭
3. **컬렉션 ID**: `admins`
4. **문서 ID**: `admin-emails`
5. **필드 추가**:
   - **필드**: `emails`
   - **타입**: `array`
   - **값**: `["admin@aether.com", "manager@aether.com"]`

### B. 관리자 이메일 추가/제거
```javascript
// 관리자 이메일 목록 예시
{
  "emails": [
    "admin@aether.com",
    "manager@aether.com",
    "supervisor@aether.com"
  ]
}
```

## 2. 관리자 계정 생성

### A. 일반 회원가입으로 관리자 계정 생성
1. **회원가입 페이지**에서 관리자 이메일로 회원가입
2. **Firebase Console** → **Authentication** → **Users**에서 확인
3. **Firestore Database** → **users** 컬렉션에서 `role: "admin"` 확인

### B. 기존 사용자를 관리자로 승격
1. **Firebase Console** → **Firestore Database** → **users** 컬렉션
2. 해당 사용자 문서 클릭
3. **필드 추가**:
   - **필드**: `role`
   - **타입**: `string`
   - **값**: `admin`

## 3. 관리자 대시보드 접근

### A. 접근 방법
1. **일반 로그인** (기존 로그인 페이지 사용)
2. **관리자 이메일**로 로그인
3. **관리자 대시보드** URL 접근: `admin-dashboard.html`

### B. 권한 확인
- 로그인 시 자동으로 관리자 권한 확인
- 관리자 권한이 없으면 접근 거부 메시지 표시
- 관리자 권한이 있으면 대시보드 접근 허용

## 4. 관리자 기능

### A. 주문 관리
- 모든 주문 조회 및 관리
- 주문 상태 변경
- 주문 상세 정보 확인

### B. 포인트 관리
- 사용자 포인트 조회 및 수정
- 포인트 적립/차감
- 포인트 히스토리 관리

### C. 고객 관리
- 사용자 목록 조회
- 사용자 정보 수정
- 사용자 상태 관리

### D. 분석 및 통계
- 매출 통계
- 사용자 통계
- 상품 통계

## 5. 보안 고려사항

### A. 권한 관리
- 관리자 이메일 목록을 Firestore에서 관리
- 실시간 권한 확인
- 로그인 시마다 권한 재확인

### B. 접근 제어
- 관리자 대시보드 접근 시 권한 확인
- 권한이 없으면 접근 거부
- 로그인 상태 확인

## 6. 테스트 방법

### A. 관리자 계정 테스트
1. 관리자 이메일로 회원가입
2. 로그인 후 관리자 대시보드 접근
3. 관리자 기능 사용 테스트

### B. 일반 사용자 테스트
1. 일반 이메일로 회원가입
2. 로그인 후 관리자 대시보드 접근 시도
3. 접근 거부 메시지 확인

## 7. 관리자 추가/제거

### A. 관리자 추가
1. **Firebase Console** → **Firestore Database** → **admins** → **admin-emails**
2. `emails` 배열에 새 이메일 추가
3. 해당 이메일로 회원가입 또는 기존 사용자 역할 변경

### B. 관리자 제거
1. **Firebase Console** → **Firestore Database** → **admins** → **admin-emails**
2. `emails` 배열에서 해당 이메일 제거
3. 또는 사용자 문서에서 `role` 필드를 `user`로 변경

## 장점

- ✅ 기존 로그인 페이지 재사용
- ✅ Firebase 기반 권한 관리
- ✅ 실시간 권한 확인
- ✅ 유연한 관리자 추가/제거
- ✅ 보안성 높은 접근 제어
